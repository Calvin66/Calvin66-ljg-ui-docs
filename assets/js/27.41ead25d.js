(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{432:function(a,t,s){"use strict";s.r(t);var e=s(12),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"开发环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发环境搭建"}},[a._v("#")]),a._v(" 开发环境搭建")]),a._v(" "),t("h3",{attrs:{id:"前置条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[a._v("#")]),a._v(" 前置条件")]),a._v(" "),t("p",[a._v("在搭建赤兔开发环境之前请确保你已经安装如下软件")]),a._v(" "),t("ul",[t("li",[a._v("Git：版本控制软件")]),a._v(" "),t("li",[a._v("JDK：后端开发")]),a._v(" "),t("li",[a._v("Maven：Java依赖包管理")]),a._v(" "),t("li",[a._v("Node：前端开发")])]),a._v(" "),t("h4",{attrs:{id:"环境要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[a._v("#")]),a._v(" 环境要求")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[a._v("环境")])]),a._v(" "),t("th",[t("strong",[a._v("版本")])])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("node.js")]),a._v(" "),t("td",[a._v("14.20.1")])]),a._v(" "),t("tr",[t("td",[a._v("jdk")]),a._v(" "),t("td",[a._v("1.8")])]),a._v(" "),t("tr",[t("td",[a._v("maven")]),a._v(" "),t("td",[a._v("3.6.0+")])]),a._v(" "),t("tr",[t("td",[a._v("lombok")]),a._v(" "),t("td",[a._v("IDEA插件安装")])]),a._v(" "),t("tr",[t("td",[a._v("mysql")]),a._v(" "),t("td",[a._v("5.7+")])])])]),a._v(" "),t("h4",{attrs:{id:"代码克隆"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码克隆"}},[a._v("#")]),a._v(" 代码克隆")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("git clone https://github.com/galaxy-data-cn/chitu-sdp.git\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"intellij-idea"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#intellij-idea"}},[a._v("#")]),a._v(" IntelliJ IDEA")]),a._v(" "),t("p",[a._v("该指南介绍了关于如何设置 IntelliJ IDEA 来进行赤兔本地前后端开发。Eclipse 不建议使用。以下文档描述了 IntelliJ IDEA 2021.3 的运行步骤。所以以下简称 IDEA 来表示 IntelliJ IDEA 。")]),a._v(" "),t("h4",{attrs:{id:"安装-lombok-插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-lombok-插件"}},[a._v("#")]),a._v(" 安装 Lombok 插件")]),a._v(" "),t("p",[a._v("IDEA 提供了插件设置来安装 Lombok 插件。如果尚未安装，请在导入赤兔之前按照以下说明来进行操作以启用对 Lombok 注解的支持：")]),a._v(" "),t("ol",[t("li",[a._v("转到 IDEA Settings → Plugins 并选择 Marketplace 。")]),a._v(" "),t("li",[a._v("选择并安装 Lombok 插件。如果出现提示，请重启IDEA。")])]),a._v(" "),t("h4",{attrs:{id:"导入赤兔"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导入赤兔"}},[a._v("#")]),a._v(" 导入赤兔")]),a._v(" "),t("ol",[t("li",[a._v("启动 IDEA 并选择 Open。")]),a._v(" "),t("li",[a._v("选择已克隆的赤兔项目存储库的根文件夹。")]),a._v(" "),t("li",[a._v("等待项目加载完成。")]),a._v(" "),t("li",[a._v("设置 JDK 1.8 和 Maven 3.6.0。")])]),a._v(" "),t("h3",{attrs:{id:"前端环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端环境"}},[a._v("#")]),a._v(" 前端环境")]),a._v(" "),t("h4",{attrs:{id:"下载-node-js-版本-v14-20-12"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载-node-js-版本-v14-20-12"}},[a._v("#")]),a._v(" 下载    node.js 版本：v14.20.12.")]),a._v(" "),t("h4",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("p",[t("strong",[a._v("方式一")]),a._v(" "),t("strong",[a._v("使用npm安装")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("npm install    \n")])])]),t("p",[t("strong",[a._v("方式二")]),a._v(" "),t("strong",[a._v("使用淘宝镜像安装")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("npm install cnpm -g --registry=https://registry.npm.taobao.org\ncnpm install\n")])])]),t("p",[t("strong",[a._v("方式三")]),a._v(" "),t("strong",[a._v("使用yarn安装")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("npm install       \nyarn\n")])])]),t("h4",{attrs:{id:"本地环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地环境配置"}},[a._v("#")]),a._v(" 本地环境配置")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("打开 vue.config.js，修改服务端地址，PROXY_ENV 设置成 'dev'，targets 对象的 dev 属性设置为 'http://127.0.0.1:12222'，请根据你本地服务端的地址及端口修改")])]),a._v(" "),t("li",[t("p",[a._v("配置 devServer 的 proxy，请求后端接口统一添加一个根路径'/sdp'（如果不用/sdp，请同步修改src/utils/config.js中confg对象的apiRoot），用于解决前端跨域问题")])])]),a._v(" "),t("h4",{attrs:{id:"本地运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地运行"}},[a._v("#")]),a._v(" 本地运行")]),a._v(" "),t("p",[a._v("npm run dev")]),a._v(" "),t("p",[a._v("浏览器打开http://localhost:9527/ ，账号密码：admin/123456")]),a._v(" "),t("h3",{attrs:{id:"后端开发环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后端开发环境"}},[a._v("#")]),a._v(" 后端开发环境")]),a._v(" "),t("h4",{attrs:{id:"配置mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置mysql"}},[a._v("#")]),a._v(" 配置mysql")]),a._v(" "),t("p",[a._v("参考如下：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("spring:\n  datasource:\n    type: com.zaxxer.hikari.HikariDataSource\n    driverClassName: com.mysql.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/sdp?tinyInt1isBit=false&useUnicode=true&characterEncoding=utf-8&autoReconnect=true&failOverReadOnly=false&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=Asia/Shanghai&allowMultiQueries=true\n    username: xxx\n    password: xxx\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h4",{attrs:{id:"配置redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置redis"}},[a._v("#")]),a._v(" 配置redis")]),a._v(" "),t("p",[a._v("参考如下：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("redis:\n    host: localhost\n    port: 6379\n    password: xxx\n    database: 10\n    timeout: 3000\n    pool:\n      max-active: 2000\n      max-idle: 20\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h4",{attrs:{id:"初始化数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库"}},[a._v("#")]),a._v(" 初始化数据库")]),a._v(" "),t("p",[a._v("执行项目路径/docs/sql下的sql文件。")]),a._v(" "),t("h4",{attrs:{id:"配置hadoop环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置hadoop环境变量"}},[a._v("#")]),a._v(" 配置hadoop环境变量")]),a._v(" "),t("p",[a._v("需要在IDEA中的Environment variables配置HADOOP_USER_NAME 和 HADOOP_HOME， HADOOP_USER_NAME 为具有 HDFS 读写权限的 Hadoop 用户名，HADOOP_HOME为开发机上Hadoop配置存放路径。")]),a._v(" "),t("p",[a._v("例如：HADOOP_USER_NAME=admin;HADOOP_HOME=D:\\opt\\apache\\hadoop-3.1.1\n"),t("img",{attrs:{src:"/docs/localDev/hadoopEnv2.png",alt:"3249c489a2c36233477543b14c6581bb.png"}})]),a._v(" "),t("p",[a._v("另外在配置文件中配置的hadoopConfDir在本地与项目同盘下需要有相应的hadoop目录及配置文件。\n例如：\n"),t("img",{attrs:{src:"/docs/localDev/hadoopEnv.png",alt:"6ee18fbe76a4d9032359673e70f5fa34.png"}})]),a._v(" "),t("h4",{attrs:{id:"启动后端服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动后端服务"}},[a._v("#")]),a._v(" 启动后端服务")]),a._v(" "),t("p",[a._v("启动 chitu-sdp-provider 下的启动类，默认使用12222端口。")]),a._v(" "),t("p",[a._v("启动 chitu-sdp-flink-submit-1.14 下的启动类，默认使用12282端口。")]),a._v(" "),t("p",[a._v("启动 chitu-sdp-flink-submit-1.15 下的启动类，默认使用12283端口。")]),a._v(" "),t("h4",{attrs:{id:"本地源码调试示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地源码调试示例"}},[a._v("#")]),a._v(" 本地源码调试示例")]),a._v(" "),t("p",[a._v("在IDEA启动后，等待几分钟，访问http://localhost:9527/ 即可看到登录页，如下：\n"),t("img",{attrs:{src:"/docs/localDev/login.png",alt:"ea9557058fb62439e530646dd0d2ef91.png"}})]),a._v(" "),t("p",[a._v("输入账号密码后即可登录到赤兔平台，这个时候就可以基于本地做二次开发了。另外任务需要使用到的集群及flink相关配置可自行在配置文件上进行配置。\n"),t("img",{attrs:{src:"/docs/localDev/home.png",alt:"29840891d8a04574d7b716afa646c89f.png"}})]),a._v(" "),t("h4",{attrs:{id:"本地接口调试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地接口调试"}},[a._v("#")]),a._v(" 本地接口调试")]),a._v(" "),t("p",[a._v("打开开发者工具，查看请求头，一般请求需要在请求头赋上env、projectId、token、X-uid这几个参数。\n"),t("img",{attrs:{src:"/docs/localDev/requestHeader.png",alt:"ff336e06c7e695181e07db5b88303b08.png"}}),a._v(" "),t("img",{attrs:{src:"/docs/localDev/requestBody.png",alt:"b0486f0494becf66fcb2aed5657f9192.png"}})]),a._v(" "),t("p",[a._v("以/job/queryJob接口为例，复制请求头以及请求体数据，粘贴到api工具进行修改调试。\n"),t("img",{attrs:{src:"/docs/localDev/apiRequestHeader.png",alt:"d3fc9d2066a6141e975179988b4a45ea.png"}}),a._v(" "),t("img",{attrs:{src:"/docs/localDev/apiRequestBody.png",alt:"16397cba1c1749ccdc8998e68a713d50.png"}}),a._v(" "),t("img",{attrs:{src:"/docs/localDev/debugger.png",alt:"321161c04b4703dedb7dbc1bf135f676.png"}})]),a._v(" "),t("p",[a._v("此时就请求到本地项目可以进行调试了。")])])}),[],!1,null,null,null);t.default=r.exports}}]);