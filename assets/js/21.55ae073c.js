(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{426:function(n,a,s){"use strict";s.r(a);var t=s(12),r=Object(t.a)({},(function(){var n=this,a=n._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h2",{attrs:{id:"开发-jar-作业"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发-jar-作业"}},[n._v("#")]),n._v(" 开发 JAR 作业")]),n._v(" "),a("h3",{attrs:{id:"前提条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[n._v("#")]),n._v(" 前提条件")]),n._v(" "),a("h5",{attrs:{id:"进入项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入项目"}},[n._v("#")]),n._v(" "),a("strong",[n._v("进入项目")])]),n._v(" "),a("p",[n._v("要有对应的项目，进入到对应的项目进行开发，可以在"),a("code",[n._v("项目管理")]),n._v("中"),a("code",[n._v("进入项目")]),n._v("或者在"),a("code",[n._v("作业开发")]),n._v("中切换项目，若没有对应的项目则需要项目管理员或者系统管理员进行添加，"),a("code",[n._v("项目管理")]),n._v("相关操作可以在用户手册中查看。")]),n._v(" "),a("p",[a("img",{attrs:{src:"/docs/quickStart/%E8%BF%9B%E5%85%A5%E9%A1%B9%E7%9B%AE.png",alt:""}})]),n._v(" "),a("p",[a("img",{attrs:{src:"/docs/quickStart/%E5%88%87%E6%8D%A2%E9%A1%B9%E7%9B%AE.png",alt:""}})]),n._v(" "),a("h5",{attrs:{id:"计算引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#计算引擎"}},[n._v("#")]),n._v(" "),a("strong",[n._v("计算引擎")])]),n._v(" "),a("p",[a("code",[n._v("计算引擎")]),n._v("即运行的集群环境，比如yarn集群，需在nacos配置文件中配置，项目中要有关联的"),a("code",[n._v("计算引擎")]),n._v("，在开发作业时才能选择对应的引擎进行运行，具体可在"),a("code",[n._v("用户手册")]),n._v("的"),a("code",[n._v("引擎管理")]),n._v("中查看。")]),n._v(" "),a("h5",{attrs:{id:"准备jar作业"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备jar作业"}},[n._v("#")]),n._v(" "),a("strong",[n._v("准备jar作业")])]),n._v(" "),a("p",[n._v("首先先写dataStream流作业，写完后打jar包上传，这里以datagen输出到print控制台为例")]),n._v(" "),a("p",[n._v("引入依赖")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<properties>\n    <maven.compiler.source>8</maven.compiler.source>\n    <maven.compiler.target>8</maven.compiler.target>\n    <flink.version>1.14.3</flink.version>\n    <scala.binary.version>2.11</scala.binary.version>\n</properties>\n\n<dependencies>\n    <dependency>\n        <groupId>org.apache.flink</groupId>\n        <artifactId>flink-table-api-java-bridge_${scala.binary.version}</artifactId>\n        <version>${flink.version}</version>\n        <scope>provided</scope>\n    </dependency>\n</dependencies>\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br")])]),a("p",[n._v("编写流作业代码")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('import org.apache.flink.api.java.utils.ParameterTool;\nimport org.apache.flink.configuration.PipelineOptions;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.table.api.bridge.java.StreamTableEnvironment;\n\npublic class Demo03_DataGen_Print {\n\n    public static void main(String[] args) {\n    \n        //通过该方式获取高级配置定义的main参数\n        ParameterTool parameterTool = ParameterTool.fromArgs(args);\n        parameterTool.toMap().forEach((k, v) -> {\n            //  System.out.println(k + ":" + v);\n        });\n        String jobName = parameterTool.get("main.param.pipeline.name","Demo03_DataGen_Print");\n        System.out.println("jobName = " + jobName);\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        StreamTableEnvironment tableEnv = StreamTableEnvironment.create(env);\n        env.setParallelism(1);\n        tableEnv.getConfig().getConfiguration().setString(PipelineOptions.NAME,jobName);\n        \n        String orderSql="CREATE TABLE order_info (\\n" +\n            "    id INT,\\n" +        "    user_id BIGINT,\\n" +\n            "    total_amount DOUBLE,\\n" +\n            "    create_time AS localtimestamp,\\n" +\n            "    WATERMARK FOR create_time AS create_time\\n" +\n            ") WITH (\\n" +\n                "    \'connector\' = \'datagen\',\\n" +\n                "    \'rows-per-second\'=\'1\',\\n" +\n                "    \'fields.id.kind\'=\'sequence\',\\n" +\n                "    \'fields.id.start\'=\'1\',\\n" +\n                "    \'fields.id.end\'=\'1000000\',\\n" +\n                "    \'fields.user_id.kind\'=\'random\',\\n" +\n                "    \'fields.user_id.min\'=\'1\',\\n" +\n                "    \'fields.user_id.max\'=\'1000000\',\\n" +\n                "    \'fields.total_amount.kind\'=\'random\',\\n" +\n                "    \'fields.total_amount.min\'=\'1\',\\n" +\n                "    \'fields.total_amount.max\'=\'1000\'\\n" +\n                ")";\n                \n        String sinkSql="CREATE TABLE sink_order_info (\\n" +\n            "    id INT,\\n" +        "    user_id BIGINT,\\n" +\n            "    total_amount DOUBLE,\\n" +\n            "    create_time AS localtimestamp,\\n" +\n            "    WATERMARK FOR create_time AS create_time\\n" +\n            ") WITH (\\n" +\n            "    \'connector\' = \'print\'\\n" +\n            ")";\n         \n        tableEnv.executeSql(orderSql);\n        tableEnv.executeSql(sinkSql);\n        tableEnv.executeSql("insert into sink_order_info select id,user_id,total_amount from order_info");\n        \n     }\n }\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br")])]),a("h3",{attrs:{id:"步骤一-上传jar包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-上传jar包"}},[n._v("#")]),n._v(" 步骤一：上传jar包")]),n._v(" "),a("p",[n._v("选择"),a("code",[n._v("实时开发")]),n._v("菜单中的"),a("code",[n._v("资源管理")]),n._v("，上传打包好的作业jar包，若使用同样的jar包可在原来的版本基础上新增一个版本。")]),n._v(" "),a("p",[a("strong",[n._v("jar包名称：")]),n._v(" 自定义名称")]),n._v(" "),a("p",[a("strong",[n._v("git_url：")]),n._v(" jar包所在的git地址")]),n._v(" "),a("p",[a("strong",[n._v("版本描述：")]),n._v(" 自定义描述")]),n._v(" "),a("p",[a("img",{attrs:{src:"/docs/quickStart/%E4%B8%8A%E4%BC%A0jar.png",alt:"fdfd5534244c174ee1f50beef7045987.png"}})]),n._v(" "),a("h3",{attrs:{id:"步骤二-创建jar作业"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-创建jar作业"}},[n._v("#")]),n._v(" 步骤二：创建jar作业")]),n._v(" "),a("p",[n._v("然后在作业开发中选择DS文件类型的作业，选择上传的jar包资源及版本，填写运行入口。")]),n._v(" "),a("p",[a("strong",[n._v("文件名称：")]),n._v(" 英文与数字组成不可包含空格特殊字符等")]),n._v(" "),a("p",[a("strong",[n._v("作业等级：")]),n._v(" 从p1到p4为从重要到不重要")]),n._v(" "),a("p",[a("strong",[n._v("文件类型：")]),n._v(" 选择DS即dataStream作业")]),n._v(" "),a("p",[a("strong",[n._v("选择jar包资源：")]),n._v(" 选择上传的jar包")]),n._v(" "),a("p",[a("strong",[n._v("选择jar包版本：")]),n._v(" 对应jar包的版本")]),n._v(" "),a("p",[a("strong",[n._v("Main-Class：")]),n._v(" 程序执行入口")]),n._v(" "),a("p",[a("img",{attrs:{src:"/docs/quickStart/%E6%96%B0%E5%BB%BAjar%E4%BD%9C%E4%B8%9A.png",alt:"37297992a211d375bf1d87f41c39b30c.png"}})]),n._v(" "),a("h3",{attrs:{id:"步骤三-发布jar作业"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-发布jar作业"}},[n._v("#")]),n._v(" 步骤三：发布jar作业")]),n._v(" "),a("p",[n._v("保存后可以看到根据作业生成的DAG图，可根据需要做一些参数配置")]),n._v(" "),a("p",[a("strong",[n._v("高级配置：")]),n._v(" 为flink作业运行时相关的一些参数")]),n._v(" "),a("p",[a("strong",[n._v("资源配置：")]),n._v(" 为作业所需资源的参数配置")]),n._v(" "),a("p",[a("strong",[n._v("DS配置：")]),n._v(" 为jar版本及main入口相关配置")]),n._v(" "),a("p",[a("strong",[n._v("版本信息：")]),n._v(" 为发布后生成的记录可以查看每次发布的差异，类似git")]),n._v(" "),a("p",[a("strong",[n._v("基础信息：")]),n._v(" 为作业的相关基础信息如作业名称，作业创建时间更新时间等")]),n._v(" "),a("p",[a("img",{attrs:{src:"/docs/quickStart/%E5%8F%91%E5%B8%83jar.png",alt:""}})]),n._v(" "),a("h3",{attrs:{id:"步骤四-运行jar任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-运行jar任务"}},[n._v("#")]),n._v(" 步骤四：运行jar任务")]),n._v(" "),a("p",[n._v("在uat环境默认不用审批，若在prod环境则需要进行审批，在uat发布后可以"),a("code",[n._v("作业运维")]),n._v("看到发布的作业为"),a("code",[n._v("初始状态")]),n._v("，点击启动可以选择直接启动、从检查点启动、保存点启动。")]),n._v(" "),a("p",[a("img",{attrs:{src:"/docs/quickStart/%E8%BF%90%E8%A1%8Cjar.png",alt:"bfd7e2edf72ccdb8a2ec2a8b9f09d202.png"}})]),n._v(" "),a("h3",{attrs:{id:"步骤五-查看运行情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-查看运行情况"}},[n._v("#")]),n._v(" 步骤五：查看运行情况")]),n._v(" "),a("p",[n._v("启动后可以看到作业在"),a("code",[n._v("运行中")]),n._v("的状态，flink jar作业就启动起来了，可点击右侧"),a("code",[n._v("flink_ui")]),n._v("中查看运行状态。\n"),a("img",{attrs:{src:"/docs/quickStart/%E8%BF%90%E8%A1%8C%E4%B8%ADjar.png",alt:"bfd7e2edf72ccdb8a2ec2a8b9f09d202.png"}}),n._v(" "),a("img",{attrs:{src:"/docs/quickStart/jar_flink_ui.png",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);