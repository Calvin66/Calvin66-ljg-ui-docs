(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{415:function(a,n,s){"use strict";s.r(n);var e=s(12),t=Object(e.a)({},(function(){var a=this,n=a._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"flink-datastream流作业快速入门"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flink-datastream流作业快速入门"}},[a._v("#")]),a._v(" Flink DataStream流作业快速入门")]),a._v(" "),n("h3",{attrs:{id:"前提条件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[a._v("#")]),a._v(" 前提条件")]),a._v(" "),n("h5",{attrs:{id:"进入项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进入项目"}},[a._v("#")]),a._v(" "),n("strong",[a._v("进入项目")])]),a._v(" "),n("p",[a._v("要有对应的项目，进入到对应的项目进行开发，可以在"),n("code",[a._v("项目管理")]),a._v("中"),n("code",[a._v("进入项目")]),a._v("或者在"),n("code",[a._v("作业开发")]),a._v("中切换项目，若没有对应的项目则需要让项目管理员或者系统管理员进行添加。")]),a._v(" "),n("p",[n("img",{attrs:{src:"/docs/quickStart/%E8%BF%9B%E5%85%A5%E9%A1%B9%E7%9B%AE.png",alt:""}})]),a._v(" "),n("p",[n("img",{attrs:{src:"/docs/quickStart/%E5%88%87%E6%8D%A2%E9%A1%B9%E7%9B%AE.png",alt:""}})]),a._v(" "),n("h5",{attrs:{id:"计算引擎"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#计算引擎"}},[a._v("#")]),a._v(" "),n("strong",[a._v("计算引擎")])]),a._v(" "),n("p",[n("code",[a._v("计算引擎")]),a._v("即运行的集群环境，比如yarn集群，需在nacos配置文件中配置，项目中要有关联的"),n("code",[a._v("计算引擎")]),a._v("，在开发作业时才能选择对应的引擎进行运行，具体可在"),n("code",[a._v("用户手册")]),a._v("的"),n("code",[a._v("引擎管理")]),a._v("中查看。")]),a._v(" "),n("h5",{attrs:{id:"准备jar作业"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#准备jar作业"}},[a._v("#")]),a._v(" "),n("strong",[a._v("准备jar作业")])]),a._v(" "),n("p",[a._v("首先先写dataStream流作业，写完后打jar包上传，这里以datagen输出到print控制台为例")]),a._v(" "),n("p",[a._v("引入依赖")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("<properties>\n    <maven.compiler.source>8</maven.compiler.source>\n    <maven.compiler.target>8</maven.compiler.target>\n    <flink.version>1.14.3</flink.version>\n    <scala.binary.version>2.11</scala.binary.version>\n</properties>\n\n<dependencies>\n    <dependency>\n        <groupId>org.apache.flink</groupId>\n        <artifactId>flink-table-api-java-bridge_${scala.binary.version}</artifactId>\n        <version>${flink.version}</version>\n        <scope>provided</scope>\n    </dependency>\n</dependencies>\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br")])]),n("p",[a._v("编写流作业代码")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('import org.apache.flink.api.java.utils.ParameterTool;\nimport org.apache.flink.configuration.PipelineOptions;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.table.api.bridge.java.StreamTableEnvironment;\n\npublic class Demo03_DataGen_Print {\n\n    public static void main(String[] args) {\n    \n        //通过该方式获取高级配置定义的main参数\n        ParameterTool parameterTool = ParameterTool.fromArgs(args);\n        parameterTool.toMap().forEach((k, v) -> {\n            //  System.out.println(k + ":" + v);\n        });\n        String jobName = parameterTool.get("main.param.pipeline.name","Demo03_DataGen_Print");\n        System.out.println("jobName = " + jobName);\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        StreamTableEnvironment tableEnv = StreamTableEnvironment.create(env);\n        env.setParallelism(1);\n        tableEnv.getConfig().getConfiguration().setString(PipelineOptions.NAME,jobName);\n        \n        String orderSql="CREATE TABLE order_info (\\n" +\n            "    id INT,\\n" +        "    user_id BIGINT,\\n" +\n            "    total_amount DOUBLE,\\n" +\n            "    create_time AS localtimestamp,\\n" +\n            "    WATERMARK FOR create_time AS create_time\\n" +\n            ") WITH (\\n" +\n                "    \'connector\' = \'datagen\',\\n" +\n                "    \'rows-per-second\'=\'1\',\\n" +\n                "    \'fields.id.kind\'=\'sequence\',\\n" +\n                "    \'fields.id.start\'=\'1\',\\n" +\n                "    \'fields.id.end\'=\'1000000\',\\n" +\n                "    \'fields.user_id.kind\'=\'random\',\\n" +\n                "    \'fields.user_id.min\'=\'1\',\\n" +\n                "    \'fields.user_id.max\'=\'1000000\',\\n" +\n                "    \'fields.total_amount.kind\'=\'random\',\\n" +\n                "    \'fields.total_amount.min\'=\'1\',\\n" +\n                "    \'fields.total_amount.max\'=\'1000\'\\n" +\n                ")";\n                \n        String sinkSql="CREATE TABLE sink_order_info (\\n" +\n            "    id INT,\\n" +        "    user_id BIGINT,\\n" +\n            "    total_amount DOUBLE,\\n" +\n            "    create_time AS localtimestamp,\\n" +\n            "    WATERMARK FOR create_time AS create_time\\n" +\n            ") WITH (\\n" +\n            "    \'connector\' = \'print\'\\n" +\n            ")";\n         \n        tableEnv.executeSql(orderSql);\n        tableEnv.executeSql(sinkSql);\n        tableEnv.executeSql("insert into sink_order_info select id,user_id,total_amount from order_info");\n        \n     }\n }\n\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br"),n("span",{staticClass:"line-number"},[a._v("39")]),n("br"),n("span",{staticClass:"line-number"},[a._v("40")]),n("br"),n("span",{staticClass:"line-number"},[a._v("41")]),n("br"),n("span",{staticClass:"line-number"},[a._v("42")]),n("br"),n("span",{staticClass:"line-number"},[a._v("43")]),n("br"),n("span",{staticClass:"line-number"},[a._v("44")]),n("br"),n("span",{staticClass:"line-number"},[a._v("45")]),n("br"),n("span",{staticClass:"line-number"},[a._v("46")]),n("br"),n("span",{staticClass:"line-number"},[a._v("47")]),n("br"),n("span",{staticClass:"line-number"},[a._v("48")]),n("br"),n("span",{staticClass:"line-number"},[a._v("49")]),n("br"),n("span",{staticClass:"line-number"},[a._v("50")]),n("br"),n("span",{staticClass:"line-number"},[a._v("51")]),n("br"),n("span",{staticClass:"line-number"},[a._v("52")]),n("br"),n("span",{staticClass:"line-number"},[a._v("53")]),n("br"),n("span",{staticClass:"line-number"},[a._v("54")]),n("br"),n("span",{staticClass:"line-number"},[a._v("55")]),n("br"),n("span",{staticClass:"line-number"},[a._v("56")]),n("br")])]),n("h3",{attrs:{id:"步骤一-上传jar包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-上传jar包"}},[a._v("#")]),a._v(" 步骤一：上传jar包")]),a._v(" "),n("p",[a._v("选择"),n("code",[a._v("实时开发")]),a._v("菜单中的"),n("code",[a._v("资源管理")]),a._v("，上传打包好的作业jar包。\n"),n("img",{attrs:{src:"/docs/quickStart/%E4%B8%8A%E4%BC%A0jar.png",alt:"fdfd5534244c174ee1f50beef7045987.png"}})]),a._v(" "),n("h3",{attrs:{id:"步骤二-创建jar作业"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-创建jar作业"}},[a._v("#")]),a._v(" 步骤二：创建jar作业")]),a._v(" "),n("p",[a._v("然后在作业开发中选择DS文件类型的作业，选择上传的jar包资源及版本，填写运行入口。")]),a._v(" "),n("p",[n("img",{attrs:{src:"/docs/quickStart/%E6%96%B0%E5%BB%BAjar%E4%BD%9C%E4%B8%9A.png",alt:"37297992a211d375bf1d87f41c39b30c.png"}})]),a._v(" "),n("h3",{attrs:{id:"步骤三-发布jar作业"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-发布jar作业"}},[a._v("#")]),a._v(" 步骤三：发布jar作业")]),a._v(" "),n("p",[n("img",{attrs:{src:"/docs/quickStart/%E5%8F%91%E5%B8%83jar.png",alt:""}})]),a._v(" "),n("h3",{attrs:{id:"步骤四-运行jar任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-运行jar任务"}},[a._v("#")]),a._v(" 步骤四：运行jar任务")]),a._v(" "),n("p",[a._v("在发布完UAT环境之后，在作业运维中可以看到发布的作业，刚上线的作业为初始状态，点击启动。\n"),n("img",{attrs:{src:"/docs/quickStart/%E8%BF%90%E8%A1%8Cjar.png",alt:"bfd7e2edf72ccdb8a2ec2a8b9f09d202.png"}})]),a._v(" "),n("h3",{attrs:{id:"步骤五-查看运行情况"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-查看运行情况"}},[a._v("#")]),a._v(" 步骤五：查看运行情况")]),a._v(" "),n("p",[a._v("启动后可以看到作业在"),n("code",[a._v("运行中")]),a._v("的状态，flink jar作业就启动起来了，可点击右侧"),n("code",[a._v("flink_ui")]),a._v("中查看运行状态。\n"),n("img",{attrs:{src:"/docs/quickStart/%E8%BF%90%E8%A1%8C%E4%B8%ADjar.png",alt:"bfd7e2edf72ccdb8a2ec2a8b9f09d202.png"}}),a._v(" "),n("img",{attrs:{src:"/docs/quickStart/jar_flink_ui.png",alt:""}})])])}),[],!1,null,null,null);n.default=t.exports}}]);